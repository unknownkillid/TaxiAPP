<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/root.css">
    <link rel="stylesheet" href="styles/fonts.css">
</head>

<body>


    <section class="panelSec">
        <header class="panel-header">
            <div class="linksPanel">
                <h1>ტაქსი</h1>
                <h1>კურიერი</h1>
            </div>

            <input type="number" placeholder="Search Number">
        </header>

        <form class="main-content-panel-taxi" id="taxiFormAdminPanel">

        </form>
    </section>


</body>


<script>
    async function fetchTaxiData() {
        try {
            const response = await fetch('http://localhost:3000/taxi/list');
            if (!response.ok) throw new Error('Failed to fetch taxi data');
            
            const taxis = await response.json();

            const form = document.getElementById('taxiFormAdminPanel');
            form.innerHTML = ''; 

            taxis.forEach(taxi => {
                const div = document.createElement('div');
                div.classList.add('taxi-item');
                div.innerHTML = `
                    <p>ID: ${taxi._id}</p>
                    <p>სახელი: ${taxi.fullName || 'N/A'}</p>
                    <p>ტელ. ნომერი: ${taxi.phoneNumber || 'N/A'}</p>
                    <p>გაცემის თარიღი: ${taxi.issueDate || 'N/A'}</p>
                    <p>მოქმედების ვადა: ${taxi.validUntil || 'N/A'}</p>
                    <p>მანქანის მოდელი: ${taxi.carModel || 'N/A'}</p>
                    <p>მანქანის ფერი: ${taxi.carColor || 'N/A'}</p>
                    <p>მანქანის წელი: ${taxi.releaseYear || 'N/A'}</p>
                    <p>მანქანის ნომერი: ${taxi.registrationNumber || 'N/A'}</p>
                    <p>ქალაქი: ${taxi.city || 'N/A'}</p>
                `;
                form.appendChild(div);
            });
        } catch (err) {
            console.error(err.message);
        }
    }

    document.addEventListener('DOMContentLoaded', fetchTaxiData);
</script>

</html>